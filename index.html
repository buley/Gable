<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Gable.js - Shadow structure for Google tables.</title>
		<link href="style.css" type="text/css" rel="stylesheet"/>
		<script src="https://raw.github.com/editor/Gable/master/gable.js"></script>
	</head>
	<body>
		<div id='container'>
			<small class='promo'>
				<a href='https://raw.github.com/editor/Gable/master/gable.js'>Download</a>
			</small>
			<div id='logo'>
				<div id='logo-icon'>
					<img src='g4.png'>
				</div>
				<div id='logo-text'>
					<h1><a href="https://github.com/editor/Gable/">Gable.js</a></h1>
					<p>Shadow structure for <a href='http://code.google.com/apis/chart/interactive/docs/reference.html#DataTable'>Google tables</a>.</p>
				</div>	

			</div>
			<div class='subhead'>Gabel makes it easy to <strong>create Google data tables</strong>, which in turn make it easy to <strong>draw graphs and plot charts</strong>.</div>
			<div class='subhead'>You take care of data and visualization. Gable covers the boring JavaScript.</div>
			<h4>Examples</h4>
			<p class='desc'>Each of the following charts was created using Gable using the code that floats right of it.</p>.
			<div class='grids'>
				<h5>Table</h5>
				<span class='example'>
					<span class='g1of2 exampleViz'><div id='example1'></div></span>
					<span class='g1of2 exampleCode'><pre></pre></span>
<script type='text/javascript'>
// Model
var data = [
	{ Title: "A Midsummer Night's Dream", Type: 'COMEDY', Year: 1595 }
	, [ "All's Well That Ends Well", 'COMEDY', 1602 ]
	, [ "Antony and Cleopatra", 'TRAGEDY', 1606 ]
	, [ "As You Like It",'COMEDY', 1599 ]
	, [ "Comedy of Errors",'COMEDY', 1589 ]
	, [ "Coriolanus",'TRAGEDY', 1607 ]
	, [ "Cymbeline",'HISTORY', 1609 ]
	, [ "Hamlet",'TRAGEDY', 1600 ]
	, [ "Henry IV,Part I", 'HISTORY', 1597 ]
	, [ "Henry IV,Part II", 'HISTORY', 1597 ]
	, [ "Henry V",'HISTORY', 1598 ]
	, [ "Henry VI,Part I", 'HISTORY', 1591 ]
];
// View
var meta = {
	//width: 450
	//, height: 300
};
// Controller
Gable( 'shakespere_works' ).add( { 'value': data } ).draw( {'target': 'example1', 'type': 'table', 'meta': meta } );
</script>
<script type='text/javascript' >
//document.getElementById( 'example1' ).parentNode.parentNode.childNodes[3].innerHTML = document.getElementById( 'example1' ).parentNode.parentNode.childNodes[5].text;
</script>
				</span>
				<span class='example'><span class='g1of2 exampleViz'><div id='example2'></div></span><span class='g1of2 exampleCode'></span></span>
				<span class='example'>
					<span class='g1of2 exampleViz'><div id='example3'></div></span>
					<span class='g1of2 exampleCode'></span>
				</span>
			</div>
			<h4>Overview</h4>
			<p class='desc'>A high-level look at the Gable API follows.</p>
			<h5>1. Setup</h5>
			<p class='subdesc'>Gable depends on the JavaScript <a href='http://code.google.com/apis/chart/interactive/docs/reference.html'>Google Visualization API</a> but will always take care of loading the right files. To enable Gable, include a script tag.</p>
			<p class='codedesc'><code>&lt;script type='text/javascript' src='https://raw.github.com/editor/Gable/master/gable.js'&gt;&lt;/script&gt;</code></p>
			<p class='desc'><strong>Note</strong>: The above script tag will get you going with Gable but it's not a great idea to serve the file directly from Github on a live website.</p>
			<p class='subdesc'>Gable has not yet been tested across all browsers.</p>
			<h4>2. Create</h4>
			<p class='subdesc'>To create a data table, give Gable the data via the `add` method and pass a unique string to identify it.</p>
			<p class='codedesc'><code>Gable( 'jill' ).add( { 'value': [ [ 'work', .5 ], [ 'play', .5 ] ] } );</code></p>
			<p class='subdesc'>Pass in a keyed `meta` object to control <a href='http://code.google.com/apis/chart/interactive/docs/customizing_charts.html'>visualization options</a> like chart labels and height and width.</p>
			<p class='codedesc'><code>Gable( 'jack' ).add( { value: [ [ 'work', .9 ], [ 'play', .1 ] ], meta: { 'label': 'Redrum' } } );</code></p>
			<p class='subdesc'>Tables are stored in memory and so getting and setting values is always immediate. That said, passing callback functions using the `on_success` and `on_error` keys allows subscribing to possibly-asyncronous notification that a request has completed.</p>
			<p class='codedesc'><code>var success_callback = function( id ) {<br/>&nbsp;&nbsp;&nbsp;&nbsp;console.log( 'Added', id );<br/>};<br/>var error_callback = function( context ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;console.log( 'Error', context );<br/>};<br/>var request_object = {<br>&nbsp;&nbsp;&nbsp;&nbsp;on_success: success_callback<br/>&nbsp;&nbsp;, on_error: error_callback<br/>};<br>Gable( 'jack' ).add( { value: [ [ 'work', .9 ], [ 'play', .1 ] ], meta: { label: 'Redrum' }, on_success: success_callback, on_error: error_callback } );</code></p>
			<p class='desc'><strong>Note</strong>: Because of ever-increasing function parameters, and for future-proofing reasons, functions use a request object. With the sole exception of the `Gable` function, which takes a unique table id, the standard style is that keyed request objects are used with commonsense key names when passing more than one argument. This makes functions with many parameters easier to call and prevents brittleness around future argument order changes.</p>
			<h4>3. Draw</h4>
			<p class='subdesc'>Pass Gable a data table's unique id, a `target` DOM id and visualization `type` to create on the page. Valid visualization types include `table`, `pie`, TK.</p>
			<p class='codedesc'><code>Gable( 'jack' ).draw( { target: 'dullard', type: 'pie' } );</code></p>
			<p class='subdesc'>The above code would attempt to append a pie chart to an HTML element with the id `dullard`. If the `id` argument (second parameter) is omitted, Gable will attempt to target a DOM element using its own unique identifier. </p>
			<h4>4. Update</h4>
			<p class='subdesc'>You can update columns, rows and cells by index. Pass the `update` method a row index, column index or both to update a row, column or cell with a given value.</p>
			<p class='codedesc'><code>Gable( 'jill' ).update( { 'row': 1, 'column': 2, 'value': .8 } );</code></p>
			<p class='desc'><strong>Note</strong>: Row and columns are not zero indexed, that is they are both referenced by number with 1 as the starting element.</p>
			<p class='subdesc'>Data tables are automatically wired to visualizations so any changes you make will be reflected live immediately. To manually control these updates, use the `stage` and `commit` methods on a per-table basis.<p>
			<p class='codedesc'><code>var table = Gable( 'jill' );<br>table.delay();<br>table.update( { row: 1, column: 2, value: .8 } );<br/>table.update( { row: 2, column: 2, meta: { label: 'play' } } );<br>table.commit();</code></p>
			<p class='subdesc'>The above code updates two rows before making a change live. You can optionally give the `delay` method a number of milliseconds and it will `commit` automatically. Use the `cancel` method to interrupt this invocation pattern and forget all non-commited changes.</p>
			<p class='desc'><strong>Note</strong>: All calls to Gable are chainable so the preceding code could be rewritten as <code class='inlinecode'>Gable( 'jill' ).delay().update( { row: 1, column: 2, value: .8 } ).update( { column: 2, id: 'happiness', meta: { label: 'play' } } ).commit();</code></p>
			<h4>5. Get</h4>
			<p class='subdesc'>You can access a single row, column or cell by passing a request object to the `get` method with a row index, column index or both.</p>
			<p class='codedesc'><code>Gable( 'jill' ).get( { target: 'dullard', type: 'pie' } );</code></p>
			<p class='subdesc'>Rows and columns with unique ids can be accessed for a table via the `find` method. The next call chained to the resulting object, which can be `get`, `update` or `remove`, will be applied to the particular element it found, if any.
			<p class='codedesc'><code>Gable( 'jill' ).find( 'happiness' ).remove();</code></p>
			<p class='subdesc'>The above code removes a column with the id 'happiness' -- a column which had an id added manually via the `update` method in an earlier example. Depending on the JavaScript object structure you pass into Gable in the `add` method, row and object ids can be declared inline as well.</p>
			<h4>6. Dump</h4>
			<p class='subdesc'>Gable stores tables in its own format and exports high-fidelity copies into Google's standard data table format. This approach allows for flexible, fast and easy <a href='http://code.google.com/apis/chart/interactive/docs/datatables_dataviews.html#javascriptliteral'>loading</a>.</p>
			<p class='subdesc'>To export a table to Google's Data Table format, pass Gable the unique id and call its `dump` method.</p>
			<p class='codedesc'><code>var dump = Gable( 'jill' ).dump();</code></p>
			<p class='subdesc'>To export the table to a .CSV string representation, pass the `dump` method the string 'csv' for the key `type`. To see how Gable stores the data internally, use the type string `raw`.</p>
			<!-- Git embed samples TK -->
			<p class='codedesc'><code>var dump = Gable( 'jill' ).dump( { type: 'csv' } );</code></p>
			<h4>7. Destroy</h4>
			<p class='subdesc'>To remove a table, call the `remove` method after passing Gable its unique id. Any corresponding charts will be removed from the DOM.</p>
			<p class='codedesc'><code>Gable( 'jill' ).remove();</code></p>
			<p class='subdesc'>Rows, columns and cells can be destroyed invidiually by passing the destroy method an object with keys representing either a row , column id or both.</p>
			<p class='codedesc'><code>Gable( 'jill' ).remove( { row: 1, column: 2 } );</code></p>
			<p class='subdesc'>The above code "removes" a single cell by turning it into a `null` value. The code below removes an entire row.</p>
			<p class='codedesc'><code>Gable( 'jill' ).remove( { row: 2 } );</code></p>
			<p class='desc'><strong>Note</strong>: In the two examples above, two columns were removed from two column table (created and drawn in the first example). If a table has no rows, no columns or neither rows nor columns it will be destroyed automatically.</p>

	</div>
	</body>
	</html>

